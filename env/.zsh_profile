# file: .zsh_profile
#
# $ DEV_ENV=~/Personal/dev ./dev-env.sh
# $ DEV_ENV=~/Personal/dev ./dev-env.sh --dry
#
# Sources:
#	- https://github.com/ThePrimeagen/dev/blob/master/env/.zsh_profile

export XDG_CONFIG_HOME=$HOME/.config
export GTK_THEME=Adwaita:dark nautilus
# See https://forum.manjaro.org/t/nautilus-does-not-switch-to-dark-mode/132095/2
gsettings set org.gnome.desktop.interface color-scheme prefer-dark
# exec_always --no-startup-id exec export LANG=en_US.UTF-8

PERSONAL=$XDG_CONFIG_HOME/Personal
VIM=nvim
#DEV_ENV=$HOME/dev	 			# Note: "dev" is at $HOME/Personal/dev; so move it to $HOME?

# =============================================================================
# Source (`-L`     Follow symbolic links) in $PERSONAL
if false; then
	for i in `find -L $PERSONAL`; do
		echo "$i"; # HACK: TEMPORARY: => /home/user/.config/Personal
		# source "$i"; # Note: unimplemented
	done
fi

# =============================================================================
# MISE-EN-PLACE: for node
# =============================================================================
eval "$(mise activate zsh)"
# 1. mise is not activated, run mise help activate or
#    read documentation at https://mise.jdx.dev for activation instructions.
#    Alternatively, add the shims directory ~/.local/share/mise/shims to PATH.
#    Using the shims directory is preferred for non-interactive setups.

# =============================================================================
# uv: Python package and project manager
# =============================================================================
eval "$(uv generate-shell-completion zsh)"
eval "$(uvx --generate-shell-completion zsh)"

# =============================================================================
# FZF
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# =============================================================================
# Exports env variables
# export GOPATH=$HOME/.local/go # unimplemented
export DEV_ENV_HOME="$HOME/Personal/dev"
export GIT_EDITOR=$VIM
export GOROOT=/usr/local/go
export PATH=$GOROOT/bin:$PATH
export PATH=$HOME/go/bin:$PATH
# For Zed binary installed via `curl -f https://zed.dev/install.sh | sh`
export PATH=$HOME/.local/bin:$PATH

# =============================================================================
# Bindings
bindkey -s ^f "tmux-sessionizer.sh\n" # requires scripts to be in PATH (see ./xprofile)

# =============================================================================
# Rust btw
. "$HOME/.cargo/env"

# =============================================================================
# Aliases
# alias gs="git status --short --branch"
alias lg="lazygit"
alias vim="nvim"
alias vimog="vim"

# =============================================================================
# Cat Funcs
catr () {
	tail -n "+$1" $3 | head -n "$( ( $2 - $1 + 1 ) )"
}

cat1Line() {
	cat $1 | tr -d "\n"
}

# =============================================================================
# Path Funcs
addToPath() {
	if [[ "$PATH" != *"$1"* ]]; then
		export PATH=$PATH:$1
	fi
}

addToPathFront() {
	if [[ "$PATH" != *"$1"* ]]; then
		export PATH=$1:$PATH
	fi
}

# addToPathFront $HOME/.local/.npm-global/bin/
# addToPathFront $HOME/.local/apps/
# addToPathFront $HOME/.local/bin/
# addToPathFront $HOME/.local/n/bin/
# addToPathFront $HOME/.local/npm/bin/
# addToPathFront $HOME/.local/odin
# addToPathFront $HOME/.zig
addToPathFront $HOME/.local/scripts/

# addToPath $HOME/.local/Personal/
# addToPath $HOME/Personal/ghostty/zig-out/bin/
# addToPathFront $HOME/.deno/bin/
# addToPathFront $HOME/.local/go/bin # is this necessary
# addToPathFront $HOME/Personal/sumneko/bin/
addToPath $HOME/.cargo/bin/
addToPathFront /usr/local/go/bin/
